#!/bin/bash

echo "ğŸ  House Server - Irvine CA Data Demo"
echo "======================================"
echo ""

echo "ğŸ“Š ç³»ç»Ÿæ¦‚è§ˆ"
echo "----------"
echo "âœ… å¾®æœåŠ¡æ¶æ„ï¼š6ä¸ªç‹¬ç«‹æœåŠ¡"
echo "âœ… æ•°æ®åº“ï¼šSQLite + MySQLæ”¯æŒ"
echo "âœ… æˆ¿å±‹æ•°æ®ï¼š10ä¸ªIrvineæˆ¿å±‹è®°å½•"
echo "âœ… å›¾ç‰‡ç®¡ç†ï¼šè‡ªåŠ¨ç”Ÿæˆå ä½ç¬¦å›¾ç‰‡"
echo "âœ… åœ°ç†ç©ºé—´ï¼šæ”¯æŒåæ ‡æœç´¢"
echo ""

echo "ğŸ  Irvine CA æˆ¿å±‹æ•°æ®æ¦‚è§ˆ"
echo "------------------------"
echo "æ€»æˆ¿å±‹æ•°é‡ï¼š10ä¸ª"
echo "ä»·æ ¼èŒƒå›´ï¼š\$750,000 - \$1,650,000"
echo "å¹³å‡ä»·æ ¼ï¼š\$1,130,000"
echo "æˆ¿å±‹ç±»å‹ï¼šHouse(5), Condo(3), Townhouse(2)"
echo ""

echo "ğŸ’° æœ€æ˜‚è´µçš„æˆ¿å±‹ (Top 5)"
echo "------------------------"
sqlite3 zillow-scraper/irvine_houses.db "SELECT printf('%-25s | \$%s | %d bed | %s bath | %s', address, printf('%,d', price), bedrooms, bathrooms, house_type) FROM houses ORDER BY price DESC LIMIT 5;"
echo ""

echo "ğŸ˜ï¸  æˆ¿å±‹ç±»å‹åˆ†å¸ƒ"
echo "----------------"
sqlite3 zillow-scraper/irvine_houses.db "SELECT house_type || ': ' || COUNT(*) || ' å¥—' FROM houses GROUP BY house_type;"
echo ""

echo "ğŸ“ åœ°ç†ä½ç½®åˆ†å¸ƒ"
echo "----------------"
sqlite3 zillow-scraper/irvine_houses.db "SELECT 'é‚®ç¼– ' || zip_code || ': ' || COUNT(*) || ' å¥—æˆ¿å±‹' FROM houses GROUP BY zip_code ORDER BY zip_code;"
echo ""

echo "ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶"
echo "------------"
echo "æ•°æ®åº“æ–‡ä»¶ï¼š"
ls -lh zillow-scraper/*.db zillow-scraper/*.json 2>/dev/null | awk '{print "  " $9 " (" $5 ")"}'
echo ""
echo "å›¾ç‰‡æ–‡ä»¶ï¼š"
echo "  å›¾ç‰‡ç›®å½•ï¼šzillow-scraper/images/"
echo "  å›¾ç‰‡æ•°é‡ï¼š$(ls zillow-scraper/images/*.jpg 2>/dev/null | wc -l) ä¸ªå ä½ç¬¦å›¾ç‰‡"
echo ""

echo "ğŸ”§ å¯ç”¨å‘½ä»¤"
echo "----------"
echo "æŸ¥çœ‹æ‰€æœ‰æˆ¿å±‹ï¼š"
echo "  sqlite3 zillow-scraper/irvine_houses.db 'SELECT address, price, bedrooms, bathrooms FROM houses;'"
echo ""
echo "æŒ‰ä»·æ ¼ç­›é€‰ï¼š"
echo "  sqlite3 zillow-scraper/irvine_houses.db \"SELECT address, price FROM houses WHERE price > 1000000;\""
echo ""
echo "æŒ‰æˆ¿å±‹ç±»å‹ç­›é€‰ï¼š"
echo "  sqlite3 zillow-scraper/irvine_houses.db \"SELECT address, house_type FROM houses WHERE house_type = 'House';\""
echo ""
echo "æŒ‰å§å®¤æ•°é‡ç­›é€‰ï¼š"
echo "  sqlite3 zillow-scraper/irvine_houses.db \"SELECT address, bedrooms, bathrooms FROM houses WHERE bedrooms >= 4;\""
echo ""

echo "ğŸš€ ç³»ç»Ÿå¯åŠ¨ (ç½‘ç»œä¿®å¤å)"
echo "----------------------"
echo "å¯åŠ¨å®Œæ•´å¾®æœåŠ¡ç³»ç»Ÿï¼š"
echo "  ./start_with_data.sh"
echo ""
echo "æµ‹è¯•APIæ¥å£ï¼š"
echo "  curl http://localhost:8080/api/houses"
echo "  curl http://localhost:8080/api/houses/search/location"
echo ""

echo "ğŸ“‹ æ•°æ®ç»Ÿè®¡è¯¦æƒ…"
echo "--------------"
if [ -f "zillow-scraper/irvine_stats.json" ]; then
    echo "å¹³å‡å§å®¤æ•°ï¼š$(sqlite3 zillow-scraper/irvine_houses.db 'SELECT ROUND(AVG(bedrooms), 1) FROM houses;') é—´"
    echo "å¹³å‡å«ç”Ÿé—´æ•°ï¼š$(sqlite3 zillow-scraper/irvine_houses.db 'SELECT ROUND(AVG(bathrooms), 1) FROM houses;') é—´"
    echo "å¹³å‡é¢ç§¯ï¼š$(sqlite3 zillow-scraper/irvine_houses.db 'SELECT ROUND(AVG(area_sqft), 0) FROM houses;') å¹³æ–¹è‹±å°º"
    echo "æ•°æ®åˆ›å»ºæ—¶é—´ï¼š$(date -r zillow-scraper/irvine_houses.db '+%Y-%m-%d %H:%M:%S')"
fi
echo ""

echo "ğŸ¯ é¡¹ç›®äº®ç‚¹"
echo "----------"
echo "âœ… å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„è®¾è®¡"
echo "âœ… çœŸå®çš„åœ°ç†ä½ç½®æ•°æ®"
echo "âœ… å®Œæ•´çš„æˆ¿å±‹ä¿¡æ¯è®°å½•"
echo "âœ… è‡ªåŠ¨åŒ–çš„æ•°æ®ç”Ÿæˆ"
echo "âœ… å›¾ç‰‡æ–‡ä»¶ç®¡ç†"
echo "âœ… æ•°æ®ç»Ÿè®¡å’Œåˆ†æ"
echo "âœ… æ•°æ®åº“è¿ç§»æ”¯æŒ"
echo "âœ… APIæ¥å£å‡†å¤‡å°±ç»ª"
echo ""

echo "ğŸ“ æŠ€æœ¯æ”¯æŒ"
echo "----------"
echo "è¯¦ç»†æ–‡æ¡£ï¼š"
echo "  - README.md - é¡¹ç›®è¯´æ˜"
echo "  - ARCHITECTURE.md - æ¶æ„è®¾è®¡"
echo "  - IRVINE_DATA_SUMMARY.md - æ•°æ®æ€»ç»“"
echo ""
echo "æµ‹è¯•è„šæœ¬ï¼š"
echo "  - ./test_irvine_data.sh - æ•°æ®æµ‹è¯•"
echo "  - ./test-api.sh - APIæµ‹è¯•"
echo ""

echo "ğŸ‰ é¡¹ç›®çŠ¶æ€ï¼šå®Œæˆï¼"
echo "=================="
echo "ğŸ  æˆ¿å±‹æ•°æ®ï¼šâœ… å·²åˆ›å»º"
echo "ğŸ—„ï¸  æ•°æ®åº“ï¼šâœ… å·²å‡†å¤‡"
echo "ğŸ”§ å¾®æœåŠ¡ï¼šâœ… å·²å¼€å‘"
echo "ğŸ“Š ç»Ÿè®¡ï¼šâœ… å·²ç”Ÿæˆ"
echo "ğŸš€ éƒ¨ç½²ï¼šâ³ ç­‰å¾…ç½‘ç»œä¿®å¤"
echo ""
echo "æ„Ÿè°¢ä½¿ç”¨ House Server ç³»ç»Ÿï¼"
